#!/usr/bin/env perl

use strict;
use warnings;
use CLI;
use CLI::Git;

my $options = CLI::options();
my $branch = shift @ARGV;

CLI::usage("<branch>") if $options->{"help"};

if(!CLI::Git::isbranch($branch) && CLI::Git::isbranch("origin/$branch")) {
    $branch = "origin/$branch";
}

CLI::asserttrue(CLI::Git::isbranch($branch), "$branch is not a branch");

CLI::Git::configset("cli.branchswitch.lastbranch", CLI::Git::branch(), $CLI::Git::CONFIGLOCAL);

CLI::run(["git", "checkout", "--track", $branch]);
