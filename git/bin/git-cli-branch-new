#!/usr/bin/perl -w

use strict;
use CLI;
use CLI::Git;

my $options = CLI::options();
my $branch = shift @ARGV;
my $remotebranch = shift @ARGV;

CLI::usage() if $options->{"help"};

CLI::usage("<branch> [<remotebranch>]") if $options->{"help"} || !$branch;

CLI::Git::configset("cli.branchswitch.lastbranch", CLI::Git::branch(), $CLI::Git::CONFIGLOCAL);

if($remotebranch) {
    CLI::run(["git", "checkout", "-b", $branch, "--track", $remotebranch]);
} else {
    CLI::run(["git", "checkout", "-b", $branch]);
}
